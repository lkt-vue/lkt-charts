(function(h,s){typeof exports=="object"&&typeof module<"u"?module.exports=s(require("d3"),require("vue")):typeof define=="function"&&define.amd?define(["d3","vue"],s):(h=typeof globalThis<"u"?globalThis:h||self,h.LktCharts=s(h.d3,h.Vue))})(this,function(h,s){"use strict";function d(e){if(e&&e.__esModule)return e;const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const r in e)if(r!=="default"){const i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:()=>e[r]})}}return t.default=e,Object.freeze(t)}const a=d(h),y=(e,t)=>t,u=e=>e;class g{constructor(t,{title:r=void 0}={}){this.x=y,this.y=u,this.title="",this.marginTop=20,this.marginRight=0,this.marginBottom=30,this.marginLeft=40,this.width=640,this.height=400,this.xDomain=void 0,this.xRange=[40,this.width-this.marginRight],this.yType=a.scaleLinear,this.yDomain=void 0,this.yRange=[this.height-this.marginBottom,this.marginTop],this.xPadding=.1,this.yFormat="",this.yLabel="",this.color="currentColor",this.X=void 0,this.Y=void 0,this.I=void 0,this.xScale=void 0,this.yScale=void 0,this.xAxis=void 0,this.yAxis=void 0,this.data=[],this.data=t,this.title=r}setSizing(t){return t.width&&(this.width=t.width),t.height&&(this.height=t.height),t.marginRight&&(this.marginRight=t.marginRight),t.marginTop&&(this.marginTop=t.marginTop),t.marginBottom&&(this.marginBottom=t.marginBottom),t.marginLeft&&(this.marginLeft=t.marginLeft),t.yRange&&(this.yRange=t.yRange),t.xPadding&&(this.xPadding=t.xPadding),t.xRange?this.xRange=t.xRange:this.xRange=[this.marginLeft,this.width-this.marginRight],t.yRange?this.xRange=t.xRange:this.yRange=[this.height-this.marginBottom,this.marginTop],this}setAxisYScaleLinear(){return this.yType=a.scaleLinear,this}setAxisY(t){return t.y&&(this.y=t.y),t.yType&&(this.yType=t.yType),t.yDomain&&(this.yDomain=t.yDomain),t.yFormat&&(this.yFormat=t.yFormat),t.yLabel&&(this.yLabel=t.yLabel),this}setAxisX(t){return t.x&&(this.x=t.x),t.xDomain&&(this.xDomain=t.xDomain),this}setColor(t){return t.color&&(this.color=t.color),this}prepare(){const t=a.map(this.data,this.x),r=a.map(this.data,this.y);this.X=t,this.Y=r,this.xDomain===void 0&&(this.xDomain=this.X),this.yDomain===void 0&&(this.yDomain=[0,a.max(this.Y)]),this.xDomain=new a.InternSet(this.xDomain),this.I=a.range(t.length).filter(o=>this.xDomain.has(this.X[o]));const i=a.scaleBand(this.xDomain,this.xRange).padding(this.xPadding),n=this.yType(this.yDomain,this.yRange),f=a.axisBottom(i).tickSizeOuter(0),S=a.axisLeft(n).ticks(this.height/40,this.yFormat);if(this.title===void 0){const o=n.tickFormat(100,this.yFormat);this.title=c=>`${this.X[c]}
${o(this.Y[c])}`}else{const o=a.map(this.data,l=>l),c=this.title;this.title=l=>c(o[l],l,this.data)}return this.xScale=i,this.yScale=n,this.xAxis=f,this.yAxis=S,this}}class p extends g{constructor(t,{title:r=void 0}={}){super(arguments[0],arguments[1])}getSVG(){const t=a.create("svg").attr("width",this.width).attr("height",this.height).attr("viewBox",[0,0,this.width,this.height]).attr("style","max-width: 100%; height: auto; height: intrinsic;");t.append("g").attr("transform",`translate(${this.marginLeft},0)`).call(this.yAxis).call(i=>i.select(".domain").remove()).call(i=>i.selectAll(".tick line").clone().attr("x2",this.width-this.marginLeft-this.marginRight).attr("stroke-opacity",.1)).call(i=>i.append("text").attr("x",-this.marginLeft).attr("y",10).attr("fill","currentColor").attr("text-anchor","start").text(this.yLabel));const r=t.append("g").attr("fill",this.color).selectAll("rect").data(this.I).join("rect").attr("x",i=>this.xScale(this.X[i])).attr("y",i=>this.yScale(this.Y[i])).attr("height",i=>this.yScale(0)-this.yScale(this.Y[i])).attr("width",this.xScale.bandwidth());return this.title&&r.append("title").text(this.title),t.append("g").attr("transform",`translate(0,${this.height-this.marginBottom})`).call(this.xAxis),t.node()}}const m=[{letter:"A",frequency:.08167},{letter:"B",frequency:.01492},{letter:"C",frequency:.02782},{letter:"D",frequency:.04253},{letter:"E",frequency:.12702},{letter:"F",frequency:.02288},{letter:"G",frequency:.02015},{letter:"H",frequency:.06094},{letter:"I",frequency:.06966},{letter:"J",frequency:.00153},{letter:"K",frequency:.00772},{letter:"L",frequency:.04025},{letter:"M",frequency:.02406},{letter:"N",frequency:.06749},{letter:"O",frequency:.07507},{letter:"P",frequency:.01929},{letter:"Q",frequency:95e-5},{letter:"R",frequency:.05987},{letter:"S",frequency:.06327},{letter:"T",frequency:.09056},{letter:"U",frequency:.02758},{letter:"V",frequency:.00978},{letter:"W",frequency:.0236},{letter:"X",frequency:.0015},{letter:"Y",frequency:.01974},{letter:"Z",frequency:74e-5}],x={name:"LktChartBar",props:{width:{type:Number,default:1280},height:{type:Number,default:500},marginTop:{type:Number,default:void 0},marginRight:{type:Number,default:void 0},marginBottom:{type:Number,default:void 0},marginLeft:{type:Number,default:void 0},color:{type:String,default:"steelblue"}},data(){return{chart:void 0,svg:void 0}},computed:{sizing(){let e={};return this.width&&(e.width=this.width),this.height&&(e.height=this.height),this.marginTop&&(e.marginTop=this.marginTop),this.marginRight&&(e.marginRight=this.marginRight),this.marginBottom&&(e.marginBottom=this.marginBottom),this.marginLeft&&(e.marginLeft=this.marginLeft),e}},mounted(){this.chart=new p(m).setAxisYScaleLinear().setAxisY({y:e=>e.frequency,yFormat:"%",yLabel:"\u2191 Frequency"}).setAxisX({x:e=>e.letter,xDomain:a.groupSort(m,([e])=>-e.frequency,e=>e.letter)}).setColor({color:this.color}),Object.keys(this.sizing).length>0&&this.chart.setSizing(this.sizing),this.chart.prepare(),this.svg=this.chart.getSVG(),this.$refs.container.append(this.svg)}},v=(e,t)=>{const r=e.__vccOpts||e;for(const[i,n]of t)r[i]=n;return r},q={"data-lkt":"chart",ref:"container"};function L(e,t,r,i,n,f){return s.openBlock(),s.createElementBlock("div",q,null,512)}const R=v(x,[["render",L]]);return{install:(e,t)=>{e.component("lkt-chart-bar",R)}}});
