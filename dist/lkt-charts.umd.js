(function(i,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue"),require("echarts"),require("lkt-http-client")):typeof define=="function"&&define.amd?define(["exports","vue","echarts","lkt-http-client"],t):(i=typeof globalThis<"u"?globalThis:i||self,t(i.LktCharts={},i.Vue,i.echarts,i.lktHttpClient))})(this,function(i,t,l,k){"use strict";var x=Object.defineProperty;var z=(i,t,l)=>t in i?x(i,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):i[t]=l;var c=(i,t,l)=>(z(i,typeof t!="symbol"?t+"":t,l),l);function m(n){if(n&&n.__esModule)return n;const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(n){for(const s in n)if(s!=="default"){const o=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}return e.default=n,Object.freeze(e)}const p=m(l);class f{constructor(){c(this,"title");c(this,"xAxis");c(this,"yAxis");c(this,"series",[]);c(this,"tooltip");c(this,"grid")}setSeries(e){return this.series=e,this}setAxisX(e){return this.xAxis=e,this}setAxisY(e){return this.yAxis=e,this}setTitle(e){return this.title=e,this}setGrid(e){return this.grid=e,this}setTooltip(e){return this.tooltip=e,this}}const _={class:"lkt-chart"},b={name:"LktChart",inheritAttrs:!1},g=t.defineComponent({...b,props:{height:{type:Number,default:500},resource:{type:String,required:!1},resourceData:{type:Object,required:!1,default:()=>({})},title:{type:Object,default:()=>({})},subtitle:{type:String,default:""},axisX:{type:Object,default:()=>({})},series:{type:Array,default:()=>[]},options:{type:f,default:()=>null}},setup(n){const e=n,s=t.ref(void 0),o=t.ref(null),u=t.ref(!1),S=t.computed(()=>{let a=[];return a.push(`height: ${e.height}px`),a.join(";")}),y=()=>{s.value&&s.value.resize&&s.value.resize()},T=async()=>{let a=p.init(o.value);u.value=!0;try{const h=await k.httpCall(e.resource,e.resourceData);let d=JSON.parse(JSON.stringify(e.options));d={...d,...h.data},a.setOption(d),s.value=a,u.value=!1}catch{u.value=!1}},B=()=>{let a=p.init(o.value);a.setOption(r.data),s.value=a};return t.onMounted(()=>{e.resource?T():B(),addEventListener("resize",y)}),t.onUnmounted(()=>{removeEventListener("resize",y)}),(a,h)=>{const d=t.resolveComponent("lkt-loader");return t.openBlock(),t.createElementBlock("div",_,[u.value?(t.openBlock(),t.createBlock(d,{key:0})):t.createCommentVNode("",!0),t.withDirectives(t.createElementVNode("div",{class:"lkt-chart-content",ref_key:"container",ref:o,style:t.normalizeStyle(S.value)},null,4),[[t.vShow,!u.value]])])}}}),j=(n,e={},s={})=>{const o=new f;return Array.isArray(n)&&n.length>0&&o.setSeries(n),typeof e=="object"&&Object.keys(e).length>0&&o.setAxisX(e),typeof s=="object"&&Object.keys(s).length>0&&o.setAxisY(s),o},O=(n,e=void 0,s=void 0)=>{const o=new f;return Array.isArray(n)&&n.length>0&&o.setSeries(n),typeof e=="object"&&Object.keys(e).length>0&&o.setAxisX(e),typeof s=="object"&&Object.keys(s).length>0&&o.setAxisY(s),o},v=(n,e="item",s="mousemove")=>(n.setTooltip({trigger:e,triggerOn:s}),n),A=(n,e=void 0,s=void 0)=>(n.setTitle({text:e,subtext:s}),n),L="",C={install:(n,e)=>{n.component("lkt-chart",g)}};i.addBasicTooltip=v,i.createBarChart=j,i.createSankeyChart=O,i.default=C,i.setChartTitle=A,Object.defineProperties(i,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
